![Hadi-Banner](../hadi-banner.png)

# Security Topics

### Topics

- Web Security
- Cryptography
- [Api Security Standart](#api-security-standart) 
- [What is public key infrastucture and how its works?]()

---

## Api Security Standard

1. **Encryption | TLS** <br>
    Be cryptic. Nothing should be in the clear for internal or external communicatoins.encryption will convert your information into code, this will make much more difficult for sensitive data end up with wrong hands. <br> You and your partners should chiper all exchanges with TLS , wheter it is one way encryption  or, even better, mutual encryption . Use the latest TLS version to block the usage of the weakes chiper suites.

2. **Authentication** <br>
    Dont talk to strangers. In simple terms, authenticity is real. It means something (or someone) is who they say they are. In the digital world, authentication is the processto verifying users's identity. It is essentially pull off the mask of anyone who wants to see your informations. <br> You should always know who's calling your APIs. There are several methods to authenticate:
    - HTTP basic authentication where a user needs to provide a user ID and password
    - API Key where user needs to a uniquie identifier configured for each API and known to API gateway
    - A token that is generated by an identity provider (IDp) server. OAuth is the most used protocol that support this method.

    At very least you should use an API Key (Asymetric Key) or a basic access authentication  (user/password) to increase the difficulity f hacking your system . But you should consider using OAuth 2as your protocol of choise for a robust security of your APIs

3. **OAuth & OpenID Connect**\
    Delegates all responsibilities. And good manager delegates responsibility, and so does great API. you should be delegating authorixation and/or authentication of your APIs to third party identity providers (IdP).

    What is OAuth 2? it is a magical mechanism preventing you from having to remember ten thousand passwords. instead of creating an account on every website, you can connect through another provide's credenrials, for example facebook or google.
    
    It works the same way for APIs: The API providers relies on a third party server to manage authorizations. The consumer doesn't input their credentials but instead gives token by provided the third party server. it protects the consumer as they dont disclose their credenatials, and their API provider doesn't need to care about protecting authorization data, as it only receive tokens

    OAuth is a commonly used delegation protocol to convey authorization. to secure your APIs even further and add authentication, you can add identity on top of it: this is the Open ID connect standart.

4. **Call Security Expert**\
    Dont be afraid to ask or use (some help). Call in some security experts. use experienced antivirus systems or ICAP (Internet Content Adaption Protocol) servers to help you scanning payloads of your APIs. it will help you to prevent any mailicious code or affecting our systems.

    There are several [security APIs](https://blog.api.rakuten.net/top-10-best-security-apis-twilio-virustotal/) you can use to protect your data. they can do things like:
    - integrate two factor authentication
    - create passwordless login, or time-based one-time passwords
    - send out push alerts if theres's a breach
    - protect against virusses and malware
    - prevent fraud
    - let you know if a password  is a known password used by a hackers
    - add threat intelligence 
    - provide security monitoring

    The best part is some of these antivirus systems are free to use. Others offer monthly planners. Premium plans will provide more protection. But you can decide for yourself the ype of security you need.

5. **Monitoring: audit, log and version**\
    Be a stalker. continually monitoring your APIs and what it's up to can pay off. Be vigilant like that overprotective parent who want to know everything about people around their son or daughter.

    How do you do this? You need to ready to troubleshot in case of error. You'll want to audit and log relevant informatons on the server - and keep the history as long it reasonable n terms of capacity for your production servers.

    Turn your log into resources for debugging in case of any incidents. Keeping a thorough record will help you keep track and make anything that's suspicious more noticable.

    Also, Monitoring dashboards are highly recommended tools to track your APIs consumptions 

    Do not forget to add version on all APIs, prefably in the path of API, to offer several APIs of different version of working and to retire and depreciated version over the other.

6. **Share a little as possibel**\
    Be paranoid. Its's OK to be cautious. Remember, is's vital to protect your data.

    Display as little information as possible in your answers. especially in error message. Lock down email subjects and content to predidined messages that can't be customized. Because IP address can give locations. Keep them for your self.

    Use IP whitelist and IP blacklist, if possible, to restrict access to your resources. Limit the number of administrators. separate acces into different roles. and hide sensitive information in all your interfaces.

7. **System protection with throttling and quotas**\
    Throttle yourself. You should restrcit access to your system to a limited number of message per second to protect your backend system bandwitch according to your servers capacity. Less is more.

    You should also access by API and by the user (or application) to ensure that no one will abuse the system or anyone API particular. 

    Throttling limits and quotas - when well set - are crucial to prevent tacks coming from different sources flooding your system with multiple request ([DDOS - Distributed Denial of Service Attack](https://www.cisa.gov/uscert/ncas/tips/ST04-015)). A DDOS can lock legitimate users ut of their network resources.

8. **Data Validation**\
    Be picky and refuse surprise gifts, especially if they are significantly large. You should check everything your server accepts. Be carefull to reject any added content that is too big. always chehck the content thata consumers are sending you, use JSON or XML chema validation and check that your parameters are what they should be (string, integer ...) to prevent any SQL injection or XML bomb.

9. **Infrastructure**\
    Network and be up to date. A good API should lean on good security network, infrastructure, and up to date software (for servers and load balancers) to be solid and always benefit from the latest security fixes.

10. OWASP Top 10
    Avoid wasps. The ([OWASP](https://blog.axway.com/api-security/owasps-api-security/?utm_source=axway&utm_medium=blog&utm_campaign=apim_fast_secure&utm_term=null&utm_content=blog&utm_id=null) Open web application security project) top 10 is a list ten worst vulnerabilities, ranked according to their exploitability and impact. In additions to the above points, to review your system, ensure you secured all the OWASP vulnerabilities.

11. **API Firewalling**\
    Build a wall. for some people, building a wall can solve the immigrations problems. This is the case for APIs at least! your api security should organize into two layers. 
    - The first layers in DMZ , with an API firewall to execute basic security mechanism like checking the message size, SQL Injecttion, and any security based on HTTP layer blocking intruders early. Then forwad the message to the second layer
    - The second layer is LAN with advanced security mechanism on data content.

    The more challenging you make it for cyber attackers get at your information, the better.

12. **API Gateway (API Management)**\
    Gateway to heaven. All the above mechanism are long to implement and maintain. Instead of reinventing the wheel, you shoul opt for a mature and high performing api management solution with all these options to save your money, time and resource and increase your time to market. An API gateway will help you secure, control, and monitor your APIs.
    
    In Addition to helping secure your APIs easily. An API Management solution will help you make sense of your API data to make technical and bussiness decisions: the key to success.

    **Summary**
    - Encryption: TLS/HTTPS
    - Auth: Passowrd, OAuth, 2fa
    - Security Monitoring: [710leo/urlooker](https://github.com/710leo/urlooker)
    - Monitoring: audit, log, versioning
    - Minimaze data sharing
    - Throttling and quotas
    - Data validation
    - OWASP top 10
    - API Firewall: Api layering
    - Ip whitelist and blacklist



src: [API Security: 12 Best Practices Everyone Should Implement](https://blog.axway.com/learning-center/digital-security/keys-oauth/api-security-best-practices)


----

## What is public key infrastucture and how its works?
PKI, or public key infrastructure, encompases everything used to established and manage public key encryption. This includes software, hardware, policies and procedures that are used to create, ditribute, manage, store and revoke digital certificates.

A digital certificate cryptoghrapicly links a public key with thw devices or user who owns it, this helps to autheticate users and devices and ensure secure digital communications.

PKI is one of the most common form of internet encryption. and it use to secure and authenticate traffic between web browser and web server. it can also be used to secure access to connected devices and internal communications within an organization. 

Public key infrastructure has a long story of securing and authenticating digital communications with two main goals: to ensure the privacy if the message being sent to verify that sender is who they claim to be.


**What is Public key infrastructure (PKI)?**

Public key infrastructure is important aspect of internet security. it is the set of technology and process that make up a framework of encryption to protect and authenticate digital communications.

PKI uses cryptographic public keys that are connected to a digital certificate, which authenticates the devieces or user sending the digital communication, Digital certificates are issued by a trusted source, a certifcate authority (CA), and act as type of digital passport to ensure that is who they say they are.

Public key infrastructure protects and authenticates communications between server and users, such as between your website(hosted on your browser) and your clients (the user trying to connect through their browser). It can also be used for secure communication within an organization and to ensure that the messages are only visible to the sender and receipent, and they have not been tampered with in transit.

The main components of public key infrastructure include the following:

- **Certifite authority (CA)**: The CA is trusted entity that issues, stores, and signs the digital certificate. The CA signs the digital certificate with their own private key and then publishes the public key that can be accessed  upon request.
- **Registration authority (RA)**: The RA verifies the identity of the user or device requesting the digital certificate. This can be third party , or the CA can also act as the RA
- **Certificate database**: This database store the digital certificates and its metadata, which includes how long the certificate is valid
- **Central direcory**: This is the secure location where the cryptographic keys are indexed and stored.
- **Certificate management system**: This is system for managing the delivery of certificate as well access to them.
- **Certificate policy**: This policy outlines the procedure of the PKI. It can be ised by outsiders to determine the PKI's trustworhiness.



**Understanding how PKI works**
Public key infrastructure uses asymetric encryption methods to ensure the message remainprovatee and also authenticate the device or user sending the transmission.

Asymetric encryption involves the use of public and private key. A cryptographic key is a long string of bits used to encrypt data.

The public key is available to anyone who request it and is issued by a trusted certificate authority. This public key verifies and authenticates the sender of the digital message and used to decrypt the transmission.

Complex algorithms are used to encrypt and decrypt public/private key pairs. The public key authenticates the sender of the digitaal message, while the private key ensure that only the receipient can open and read it.


**PKI Certificates**

The core of public key infrastructure is trust. its important for receipient entity to know without a doubt that the sender to the digital certificate is exactly who they claim to be.

Trusted third party CAs can vouch for the sender and help to prove that they are indeed who they say they are. Digital certificates are used to verify digital identities.

Digital certificates are alo called PKI ertificates or X.509 certificates. A PKI certificate offers proof of identity to a requesting entity, which is verified by a third party and works like a digital passport or driver's license.

The PKI certificate will contain the following:

- Distinguished name (DN) of the owner
- Owner public key
- Date of issuance
- Expiration date\- DN of issuing CA
- Issuing CAs digital signature

**Why is PKI used?**

One of the common uses of PKI is the TLS/SSL (Transport layer security/ secure socket layer), which secures encrypted HTTP (hypertext transport protocol) communications.

Websites owners will obtain a digital certificate from a trusted CA. The owner of the website will have to prove that they are indeed the actual owner. Once verified, the website owner can purchase an SSL certificate to install on the web server. This tells the browser that it is the legitimate website the browser is trying to access.

The TLS/SSL protocol relies on a chain of trust, where the user has to trust the root- certificate granting authority. An alternative schemes is the web of trust , which is use self signed certificates thate are validated by a third party. Web of trust is often used in smaller communities of users, such as within an organizations's self-contained network.

Additional uses for PKI include the following:

- Email encryption and authenticate of the sender
- Signing documents an software
- Using database servers to secure internal communications 
- Securing web communications, such as e-commerce
- authentication and encryption doccuments 
- Securing local networks and smart card authentication
- Encrypting and decrypting files
- Restricted access to VPNs and enterprise intranets
- Secure communications mutually trusted devices such as IoT (Internet of Things) devices




src: [What is public key infrastucture and how its works?](https://www.okta.com/identity-101/public-key-infrastructure/)

---
<p style="color: grey">created by <b  style="color:white">Hadi Gunawan @2023</b></p>
